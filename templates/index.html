<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <title>School Reviews</title>
</head>
<body>
  <header>
    <h1>Student Reviews</h1>
    <p><a href="{{ url_for('login') }}">Login</a> | <a href="{{ url_for('signup') }}">Signup</a> | <a href="{{ url_for('review') }}">Leave a Review</a> | <a href="{{ url_for('logout') }}">Logout</a></p>
  </header>

  <div class="container">
    <form method="GET">
      <select name="sort" onchange="this.form.submit()">
        <option value="newest" {% if request.args.get('sort') == 'newest' %}selected{% endif %}>Newest</option>
        <option value="oldest" {% if request.args.get('sort') == 'oldest' %}selected{% endif %}>Oldest</option>
        <option value="stars" {% if request.args.get('sort') == 'stars' %}selected{% endif %}>Highest Rated</option>
      </select>
    </form>
    <br>
    {% for review in reviews %}
      <div class="review-card">
        <strong>{{ review.name }}</strong>
        <div class="stars">{{ '★' * review.stars }}{{ '☆' * (5 - review.stars) }}</div>
        <p>{{ review.comment }}</p>
        <div class="review-meta">Submitted on {{ review.timestamp[:10] }}</div>
      </div>
    {% else %}
      <p>No reviews yet.</p>
    {% endfor %}
  </div>
</body>
</html>
